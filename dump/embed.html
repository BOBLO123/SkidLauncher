<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/css/about-blank.css" />
    <link rel="icon" type="image/x-icon" href="/icon.png" />
    <title>LynxLauncher</title>
  </head>
  <body>
<div class="col-12">
  <div class="button-area d-block">
    <a href="/" class="back-button">Back</a>
    <div class="console-container">
      <div class="console">
        <h1>Proxy</h1>
        <div class="consolebody">
          <p>Enter a URL you want to be opened in a about:blank page below:</p>
          <p class="console-input"><input id="url-target" value="" autocomplete="on" type="text" autofocus /></p>
          <p>!!! Make sure https:// is in the URL or it wont work [Example: https://lynxlauncher.vercel.app/]!!!</p>
        </div>
      <div class="button-wrapper">
        <button id="create" class="console-button">Create page</button>
        <button class="console-button" onclick="document.getElementById('url-target').value = ''">Clear input</button>
      </div>
    </div>
    <script>
      var url = document.getElementById("url-target");
      var urlObj = new window.URL(window.location.href);
      document.getElementById("create").onclick = function () {
        if (url.value.substring(0, 8) !== 'https://' && url.value.substring(0, 7) !== 'http://') {
    		url.value = 'https://' + url.value.split('https://').pop();
        } else if (url.value.substring(0, 7) == 'http://'){
        	url.value = 'https://' + url.value.split('http://').pop();
        };
        win = window.open();
        win.document.body.style.margin = "0";
        win.document.body.style.height = "100vh";
        var iframe = win.document.createElement("iframe");
        iframe.style.border = "none";
        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.margin = "0";
        iframe.referrerpolicy = "no-referrer";
        iframe.allow = "fullscreen";
        iframe.src = url.value;
        win.document.body.appendChild(iframe);
        var script = win.document.createElement("script");
        script.src = "https://lynxlauncher/js/main.js";
        win.document.body.appendChild(script);
      };
    </script>
    <script src="/js/main.js"></script>
  </body>
</html>
